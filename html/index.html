<!DOCTYPE html>
<html>
  <head>
    <title>Servo Control</title>
  </head>
  <body>
    <h1>Servo Control</h1>
    <p>Use the arrow keys to control the servo:</p>
    <div id="status"></div>
    <script>
      const websocketUrl = 'ws://localhost:8080';
      const connection = new WebSocket(websocketUrl);

      // Handle websocket connection errors
      connection.onerror = (error) => {
        console.error('WebSocket error:', error);
      };

      // Handle incoming messages from the server
      connection.onmessage = (event) => {
        console.log('Received message:', event.data);
        document.getElementById('status').textContent = event.data;
      };

      // Send a command to the server
      const sendCommand = (servoNumber, targetPosition) => {
        const command = {
          servoNumber,
          targetPosition
        };

        connection.send(JSON.stringify(command));
      };

      // Detect key presses and send commands to the server
      document.addEventListener('keydown', (event) => {
        switch (event.key) {
          case 'ArrowLeft':
            sendCommand(0, 5000);
            break;
          case 'ArrowRight':
            sendCommand(0, 7000);
            break;
        }
      });
    </script>
  </body>
</html>

